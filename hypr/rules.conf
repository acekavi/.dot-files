# Ignore maximize requests from apps (macOS behavior)
windowrule = suppressevent maximize, class:.*

# Fix dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
windowrulev2=noblur,class:^()$,title:^()$

workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0

# Remove rounded corners for maximized and fullscreen windows
windowrulev2 = rounding 0, fullscreen:1
windowrulev2 = rounding 0, fakefullscreen:1

# Remove corners and borders for maximized windows
windowrulev2 = rounding 0, class:.*,maximized:1
windowrulev2 = bordersize 0, class:.*,maximized:1

# Remove borders and rounding when window is the only one (smart gaps)
windowrulev2 = bordersize 0, floating:0, onworkspace:w[t1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[t1]
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]

# Floating windows for system dialogs
windowrule = float, class:^(pavucontrol)$
windowrule = float, class:^(nm-connection-editor)$
windowrule = float, class:^(gnome-calculator)$
windowrule = float, class:^(org.gnome.Calculator)$
windowrule = float, title:^(Picture-in-Picture)$
windowrule = float, class:^(firefox)$,title:^(Picture-in-Picture)$

# macOS-like centered dialogs
windowrule = center, class:^(org.gnome.Calculator)$
windowrule = center, class:^(pavucontrol)$
windowrule = center, class:^(nm-connection-editor)$

# Opacity rules for better visual hierarchy
windowrule = opacity 0.95 0.85, class:^(Alacritty)$
windowrule = opacity 1.0 0.95, class:^(firefox)$
windowrule = opacity 1.0 0.95, class:^(code)$

# Picture-in-picture
windowrule = float, title:^(Picture-in-Picture)$
windowrule = pin, title:^(Picture-in-Picture)$
windowrule = move 75% 75%, title:^(Picture-in-Picture)$
windowrule = size 24% 24%, title:^(Picture-in-Picture)$

#####################
### LAYER RULES ###
#####################

# Notification styling
layerrule = blur, notifications
layerrule = ignorezero, notifications