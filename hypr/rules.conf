# Window and Workspace Rules
# macOS-inspired window management and application behavior

####################
### WINDOW RULES ###
####################

# macOS-style application window rules
# System applications
windowrulev2 = float, class:^(org.gnome.Calculator)$
windowrulev2 = size 350 500, class:^(org.gnome.Calculator)$
windowrulev2 = center, class:^(org.gnome.Calculator)$

windowrulev2 = float, class:^(org.gnome.Calendar)$
windowrulev2 = size 800 600, class:^(org.gnome.Calendar)$
windowrulev2 = center, class:^(org.gnome.Calendar)$

# System preferences and settings
windowrulev2 = float, class:^(org.gnome.Settings)$
windowrulev2 = float, class:^(gnome-control-center)$
windowrulev2 = size 900 700, class:^(org.gnome.Settings)$
windowrulev2 = center, class:^(org.gnome.Settings)$

# File manager (Finder equivalent)
windowrulev2 = opacity 0.95, class:^(org.gnome.Nautilus)$
windowrulev2 = opacity 0.95, class:^(thunar)$
windowrulev2 = opacity 0.95, class:^(pcmanfm)$

# Terminal applications (macOS Terminal.app style)
windowrulev2 = opacity 0.92, class:^(Alacritty)$
windowrulev2 = opacity 0.92, class:^(kitty)$
windowrulev2 = opacity 0.92, class:^(foot)$
windowrulev2 = opacity 0.92, class:^(wezterm)$

# Text editors and IDEs
windowrulev2 = opacity 0.98, class:^(code-oss)$
windowrulev2 = opacity 0.98, class:^(Code)$
windowrulev2 = opacity 0.98, class:^(VSCodium)$

# Media applications
windowrulev2 = float, class:^(mpv)$
windowrulev2 = size 800 600, class:^(mpv)$
windowrulev2 = center, class:^(mpv)$

windowrulev2 = opacity 0.95, class:^(Spotify)$
windowrulev2 = workspace 9, class:^(Spotify)$

# Communication apps
windowrulev2 = workspace 8, class:^(discord)$
windowrulev2 = workspace 8, class:^(Discord)$
windowrulev2 = workspace 8, class:^(slack)$
windowrulev2 = workspace 8, class:^(Slack)$
windowrulev2 = workspace 8, class:^(teams)$
windowrulev2 = workspace 8, class:^(zoom)$

# Web browsers
windowrulev2 = opacity 0.98, class:^(firefox)$
windowrulev2 = opacity 0.98, class:^(chromium)$
windowrulev2 = opacity 0.98, class:^(google-chrome)$

# Picture-in-Picture (macOS-style)
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = size 25% 25%, title:^(Picture-in-Picture)$
windowrulev2 = move 72% 7%, title:^(Picture-in-Picture)$
windowrulev2 = opacity 1.0, title:^(Picture-in-Picture)$

# Notification and system overlays
windowrulev2 = float, class:^(dunst)$

# Password managers and security
windowrulev2 = float, class:^(Bitwarden)$
windowrulev2 = float, class:^(1Password)$
windowrulev2 = size 400 600, class:^(Bitwarden)$
windowrulev2 = center, class:^(Bitwarden)$

# System monitors and utilities
windowrulev2 = float, class:^(gnome-system-monitor)$
windowrulev2 = float, class:^(htop)$
windowrulev2 = float, class:^(btop)$
windowrulev2 = size 800 600, class:^(gnome-system-monitor)$

# Gaming applications
windowrulev2 = workspace 10, class:^(Steam)$
windowrulev2 = workspace 10, class:^(steam)$
windowrulev2 = fullscreen, class:^(steam_app_).*
windowrulev2 = immediate, class:^(steam_app_).*
windowrulev2 = allowsinput, class:^(steam_app_).*

# Development tools
windowrulev2 = workspace 3, class:^(code-oss)$
windowrulev2 = workspace 3, class:^(Code)$
windowrulev2 = workspace 3, class:^(jetbrains-.*)$

# Virtual machines
windowrulev2 = float, class:^(virt-manager)$
windowrulev2 = float, class:^(VirtualBox)$
windowrulev2 = size 80% 80%, class:^(virt-manager)$
windowrulev2 = center, class:^(virt-manager)$

# Image and video editing
windowrulev2 = workspace 4, class:^(gimp)$
windowrulev2 = workspace 4, class:^(inkscape)$
windowrulev2 = workspace 4, class:^(blender)$
windowrulev2 = workspace 4, class:^(kdenlive)$

# Office applications
windowrulev2 = workspace 5, class:^(libreoffice-.*)$
windowrulev2 = workspace 5, class:^(onlyoffice-.*)$

# Email clients
windowrulev2 = workspace 6, class:^(thunderbird)$
windowrulev2 = workspace 6, class:^(evolution)$

# Note-taking and documentation
windowrulev2 = workspace 7, class:^(obsidian)$
windowrulev2 = workspace 7, class:^(notion)$
windowrulev2 = workspace 7, class:^(joplin)$

# Dialogs and popups (macOS-style)
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float, class:^(polkit-.*)$
windowrulev2 = center, class:^(polkit-.*)$
windowrulev2 = size 400 300, class:^(polkit-.*)$

# File chooser dialogs
windowrulev2 = float, title:^(Open File)$
windowrulev2 = float, title:^(Save File)$
windowrulev2 = float, title:^(Select Folder)$
windowrulev2 = size 800 600, title:^(Open File)$
windowrulev2 = center, title:^(Open File)$

# Network and connection dialogs
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(blueman-.*)$
windowrulev2 = center, class:^(nm-connection-editor)$

# System tray and applets
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = size 600 400, class:^(pavucontrol)$
windowrulev2 = center, class:^(pavucontrol)$

# Prevent certain windows from stealing focus
windowrulev2 = noinitialfocus, class:^(steam)$
windowrulev2 = noinitialfocus, class:^(Spotify)$

# Suppress maximize events (macOS doesn't have maximize)
windowrule = suppressevent maximize, class:.*

# Fix XWayland dragging issues
windowrule = nofocus, class:^$, title:^$, xwayland:1, floating:1, fullscreen:0, pinned:0

######################
### WORKSPACE RULES ###
######################

# Smart gaps and borders - no gaps/borders/rounding when only one window
# w[tv1] = workspaces with only one tiled window
# f[1] = workspaces with only one window (including floating)
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0

# Remove borders and rounding for single windows (maximized appearance)
windowrulev2 = bordersize 0, floating:0, onworkspace:w[tv1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]

# Default workspace assignments (macOS Spaces style)
workspace = 1, monitor:eDP-1, default:true, persistent:true
workspace = 2, monitor:eDP-1, persistent:true
workspace = 3, monitor:eDP-1, persistent:true
workspace = 4, monitor:eDP-1, persistent:true
workspace = 5, monitor:eDP-1, persistent:true

# Special workspaces (macOS Dashboard/Mission Control style)
workspace = special:magic, gapsout:40, gapsin:20, bordersize:2, border:true, shadow:true
workspace = special:dashboard, gapsout:60, gapsin:30, bordersize:0, border:false, shadow:false
workspace = special:hidden, gapsout:20, gapsin:10, bordersize:1, border:true, shadow:true

# Smart gaps - no gaps when only one window (optional)
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0

# Monitor-specific workspaces (for multi-monitor setups)
# workspace = 1, monitor:eDP-1
# workspace = 2, monitor:eDP-1  
# workspace = 11, monitor:DP-1
# workspace = 12, monitor:DP-1

# Workspace-specific settings
workspace = 1, layoutopt:orientation:left
workspace = 2, layoutopt:orientation:left
workspace = 3, layoutopt:orientation:left

# Gaming workspace (fullscreen, no gaps)
workspace = 10, gapsout:0, gapsin:0, bordersize:0, rounding:false

# Media workspace (optimized for video)
workspace = 9, gapsout:10, gapsin:5, bordersize:1

# Communication workspace (chat apps)
workspace = 8, gapsout:15, gapsin:8, bordersize:1

######################
### LAYER RULES ###
######################

# Layer rules for system overlays
layerrule = blur, notifications
layerrule = blur, logout_dialog
layerrule = blur, powermenu
layerrule = blur, lockscreen
layerrule = blur, overview

# Screenshot overlay rules
layerrule = noanim, selection
